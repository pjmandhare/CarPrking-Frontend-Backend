<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="../bootstrap/bootstrap.min.css" rel="stylesheet" />
  <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/floating-labels/" />
  <link href="./style.css" rel="stylesheet" />

  <title>Login</title>
  <script>
                  window.history.forward();

    // function for user signup
    function signUp(err) {
      let firstName = document.getElementById("firstName").value;
      let lastname = document.getElementById("lastName").value;
      let date = document.getElementById("date").value;
      let email = document.getElementById("email").value;
      let phone = document.getElementById("phone").value;
      let license = document.getElementById("licenceNumber").value;
      let registration = document.getElementById("carReg").value;
      let password = document.getElementById("password").value;
      let data = {
        firstName,
        lastName: lastname,
        datOfBirth: date,
        email,
        phoneNo: phone,
        liecenseNo: license,
        carRegistration: registration,
        password,
      };
      // check validations for user input and register api call here
      if (email !== "" &&
        password !== "" &&
        firstName !== "" &&
        lastname !== "" &&
        license !== "" &&
        registration !== ""
      ) {
        fetch("https://car-parked-app.herokuapp.com/api/user/register", {
          method: "POST",
          mode: "cors",
          cache: "no-cache",
          credentials: "same-origin",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then(res => res.json()).then(ress => {
            if (ress.success) {
              localStorage.setItem('user_token',ress.token)
              // console.log("suceeeeeeeeeeeeeeeeee");
              document.getElementById("alert").style.display = "block";
              document.getElementById("alert").innerHTML = "Register Succesfully!";
              location.href = "../Home/index.html"
              window.history.forward();
              setTimeout(() => {
                document.getElementById("alert").style.display = "none";

              }, 3000);
            }

          }).catch((err) => console.log(err));
      } else {
        alert('Please fill complete information')
      }
    }
  </script>
</head>

<body>
  <header>
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light" style="margin: 0 100px">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
          aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- <a class="navbar-brand" href="../index.html">
            <img src="../assets/app-logo.svg" width="100%" height="100%" />
          </a> -->

        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
          <ul class="navbar-nav mt-2 mt-lg-0" style="width: 100%; justify-content: flex-end">
            <li class="nav-item" style="margin-top: 5px; margin-right: 1rem">
              <a class="nav-link" style="cursor: default; font-weight: 650">Already have an account?</a>
            </li>
            <li class="nav-item">
              <a href="../Login/login.html"><button class="login-btn">Login</button></a>
            </li>
          </ul>
          <!-- <ul class="navbar-nav mt-2 mt-lg-0 ml-1">
              <li class="nav-item">
                <a><button class="signup-btn">Signup</button></a>
              </li>
            </ul> -->

          <!-- <form class="form-inline my-2 my-lg-0">
              <input
                class="form-control mr-sm-2"
                type="search"
                placeholder="Search"
                aria-label="Search"
              />
              <button
                class="btn btn-outline-success my-2 my-sm-0"
                type="submit"
              >
                Search
              </button>
            </form> -->
        </div>
      </nav>
    </div>
  </header>

  <div id="login">
    <!-- <h3 class="text-center text-white pt-5">Login form</h3> -->
    <div class="container">
      <div id="alert" class="alert alert-success alert-dismissible"
      style="width:22.2rem !important; display:none; float: right; margin-top:55%;">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Success!</strong>
    </div>
      <div id="login-row" class="row justify-content-center align-items-center">
        <div id="login-column" class="col-md-6">
          <div id="login-box" class="col-md-12">
            <form id="login-form" class="form" action="" method="post">
              <h3 class="text">Time to register!</h3>
              <p class="enterEmail">
                Enter your details to create an account.
              </p>
              <div class="form-inputs">
                <div class="form-label-group inputssssss">
                  <input type="text" id="firstName" name="firstName" class="form-control" placeholder="First Name"
                    required autofocus />
                  <label for="firstName">First Name</label>
                </div>
                <div class="form-label-group inputssssss">
                  <input type="text" id="lastName" name="lastName" class="form-control" placeholder="Last Name"
                    required />
                  <label for="lastName">Last Name</label>
                </div>
              </div>
              <div class="form-label-group">
                <input type="date" id="date" name="date" class="form-control" required />
                <label for="date">Date of Birth</label>
              </div>
              <div class="form-inputs">
                <div class="form-label-group inputssssss">
                  <input type="emai" id="email" name="email" class="form-control" placeholder="Email address" required
                    autofocus />
                  <label for="email">Email Address</label>
                </div>
                <div class="form-label-group inputssssss">
                
                    <input type="password" id="password" class="form-control">
                  <label for="email">Password</label>
                </div>
              </div>
              <div class="form-label-group">
                <input type="text" id="phone" name="phone" class="form-control" placeholder="Phone Number" required />
                <label for="phone">Phone Number</label>
              </div>
              <div class="form-inputs">
                <div class="form-label-group inputssssss">
                  <input type="text" id="licenceNumber" name="licenceNumber" class="form-control"
                    placeholder="Email address" required autofocus />
                  <label for="licenceNumber">Licence Number</label>
                </div>
                <div class="form-label-group inputssssss">
                  <input type="text" id="carReg" name="carReg" class="form-control" placeholder="Password" required />
                  <label for="carReg">Car Registration</label>
                </div>
              </div>
              <div class="form-label-group" style="box-shadow: 0 3px 0 rgb(192 200 235 / 60%)">
                <button type="button" onclick="signUp()" class="sendBtn btn-block">
                  Sign up
                </button>
              </div>
              <div class="linear-circle">
                <span class="lines"></span>
                <span class="circle"></span>
                <span class="lines"></span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>

</html>